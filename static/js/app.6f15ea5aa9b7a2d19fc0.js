webpackJsonp([1],{HZcj:function(t,e){},NHnr:function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d.a.post(t,function(t){var e="";for(var n in t)e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t[n]);return e.length>0&&(e=e.substr(1)),e}(e)).then(function(t){return u.a.resolve(t.data)}).catch(function(t){return alert("噢，看起来你的网络不太好哦"),u.a.reject(t)})}Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"background"}),this._v(" "),e("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("router-view")],1)],1)},staticRenderFns:[]},o=n("VU/8")({name:"app"},a,!1,function(t){n("jHKH")},null,null).exports,s=n("/ocq"),c=n("//Fk"),u=n.n(c),l=n("mtWM"),d=n.n(l),p=new r.a({name:"Data",data:function(){return{voice:"",receiver:"",content:"",status:0}}}),v={name:"Welcome",data:function(){return{code:"",errorInfo:" "}},methods:{getLetter:function(){var t=this;this.$refs.submit_button_text.innerHTML="梯仔取信中",function(t){return i("./api/get-capsule.php",{code:t})}(this.code).then(function(e){switch(parseInt(e.error)){case 0:null!==e.voice&&(p.voice=String(e.voice.replace(/.amr/,".mp3"))),p.content=e.content,p.receiver=e.receiver,null===e.voice||""===e.voice?(p.status=2,t.$router.push({name:"letter"})):(p.status=1,t.$router.push({name:"voice"}));break;case 404:t.errorInfo="输入的兑换码不对哦",t.$refs.submit_button_text.innerHTML="提交";break;default:t.errorInfo="网络出了点问题哦，请重试",t.$refs.submit_button_text.innerHTML="提交"}}).catch(function(e){t.$refs.submit_button_text.innerHTML="提交"})}},watch:{code:function(t){this.code=t.toUpperCase()}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"center"},[n("div",{staticClass:"green"},[n("p",[t._v("你收到了一封来自半年前的信")]),t._v(" "),n("p",[t._v("马上输入兑换码查看吧")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.code,expression:"code",modifiers:{trim:!0}}],staticClass:"input-text green",attrs:{type:"text"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),n("p",{staticClass:"error-noticer"},[t._v(t._s(t.errorInfo))]),t._v(" "),n("button",{ref:"submit_button",staticClass:"submit-button",on:{click:t.getLetter}},[n("span",{ref:"submit_button_text"},[t._v("提交")])])])])},staticRenderFns:[]},m=n("VU/8")(v,f,!1,function(t){n("d7hJ")},"data-v-a33ba8d2",null).exports,h={name:"Letter",data:function(){return{Data:p}},mounted:function(){2!==p.status&&this.$router.push({name:"welcome"})}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("div",{staticStyle:{overflow:"auto"},domProps:{innerHTML:this._s(this.Data.content)}})])},staticRenderFns:[]},b=n("VU/8")(h,_,!1,function(t){n("yDVF")},"data-v-c6f83efa",null).exports,g={name:"Letter",data:function(){return{Data:p,isPlaying:!1}},mounted:function(){1!==p.status&&this.$router.push({name:"welcome"}),this.$refs.audio.onended=this.onEnded},methods:{control:function(){this.isPlaying=!this.isPlaying,this.isPlaying?this.$refs.audio.play():this.$refs.audio.pause()},onEnded:function(){this.isPlaying=!1}}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"center"},[e("audio",{ref:"audio",attrs:{src:this.Data.voice,preload:"preload"}}),this._v(" "),e("div",{staticClass:"green"},[e("p",[this._v("你收到的是一段语音")]),this._v(" "),e("p",[this._v("马上点击播放吧")]),this._v(" "),e("button",{staticClass:"voice-button",class:{"pause-button":this.isPlaying,"play-button":!this.isPlaying},on:{click:this.control}})])])},staticRenderFns:[]},w=n("VU/8")(g,$,!1,function(t){n("HZcj")},"data-v-96db45c8",null).exports;r.a.use(s.a);var y=new s.a({routes:[{path:"/welcome",name:"welcome",component:m},{path:"/letter",name:"letter",component:b},{path:"/voice",name:"voice",component:w},{path:"*",redirect:"/welcome"}]});r.a.config.productionTip=!1,new r.a({el:"#app",router:y,template:"<App/>",components:{App:o}})},d7hJ:function(t,e){},jHKH:function(t,e){},yDVF:function(t,e){}},["NHnr"]);